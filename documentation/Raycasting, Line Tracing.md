–ê–ª–≥–æ—Ä–∏—Ç–º –∫–æ–ª–ª–∏–∑–∏–∏ **Raycasting** (–∏–ª–∏ **Line Tracing**) ‚Äî —ç—Ç–æ –º–µ—Ç–æ–¥, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –≤ –∫–æ–º–ø—å—é—Ç–µ—Ä–Ω–æ–π –≥—Ä–∞—Ñ–∏–∫–µ, —Ñ–∏–∑–∏–∫–µ –∏ –∏–≥—Ä–∞—Ö –¥–ª—è **–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–π –∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤ –≤–¥–æ–ª—å –ª—É—á–∞**. –î–∞–≤–∞–π—Ç–µ —Ä–∞–∑–±–µ—Ä—ë–º—Å—è –ø–æ–¥—Ä–æ–±–Ω–æ –∏ –ø–æ—à–∞–≥–æ–≤–æ, –ø–æ—è—Å–Ω—è—è –≤—Å–µ —Ç–µ—Ä–º–∏–Ω—ã –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º —è–∑—ã–∫–µ.

---

## üîç –ß—Ç–æ —Ç–∞–∫–æ–µ **Raycasting**?

**Raycasting** (–æ—Ç –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ _ray_ ‚Äî –ª—É—á, _casting_ ‚Äî "–±—Ä–æ—Å–∞–Ω–∏–µ", "–∏—Å–ø—É—Å–∫–∞–Ω–∏–µ") ‚Äî —ç—Ç–æ –ø—Ä–æ—Ü–µ—Å—Å ¬´–ø—É—Å–∫–∞ –ª—É—á–∞¬ª –∏–∑ –æ–¥–Ω–æ–π —Ç–æ—á–∫–∏ –≤ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞, **—á—Ç–æ –æ–Ω –ø–µ—Ä–µ—Å–µ–∫–∞–µ—Ç –Ω–∞ —Å–≤–æ—ë–º –ø—É—Ç–∏**.

–≠—Ç–æ –ø–æ—Ö–æ–∂–µ –Ω–∞ **–ª–∞–∑–µ—Ä–Ω—É—é —É–∫–∞–∑–∫—É**, –∫–æ—Ç–æ—Ä—É—é –≤—ã –Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç–µ, —á—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, –≤–æ —á—Ç–æ –æ–Ω–∞ "—É–ø—Ä—ë—Ç—Å—è".

---

## üìè –ß—Ç–æ —Ç–∞–∫–æ–µ **Line Tracing**?

**Line Tracing** (–∞–Ω–≥–ª. _line_ ‚Äî –ª–∏–Ω–∏—è, _tracing_ ‚Äî "–ø—Ä–æ—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ", "—Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞") ‚Äî —ç—Ç–æ —Ç–æ –∂–µ —Å–∞–º–æ–µ, –Ω–æ —Ç–µ—Ä–º–∏–Ω —á–∞—â–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –∏–≥—Ä–æ–≤—ã—Ö –¥–≤–∏–∂–∫–∞—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, Unreal Engine). –ü–æ —Å—É—Ç–∏, **Line Trace == Raycast**.

---

## ‚úÖ –û—Å–Ω–æ–≤–Ω–∞—è —Ü–µ–ª—å

–ù–∞–π—Ç–∏:

- –ü–µ—Ä–µ—Å–µ–∫–∞–µ—Ç—Å—è –ª–∏ –ª—É—á (**ray**) —Å –∫–∞–∫–∏–º-–ª–∏–±–æ –æ–±—ä–µ–∫—Ç–æ–º (**collider** ‚Äî –æ–±—ä–µ–∫—Ç, –∏–º–µ—é—â–∏–π —Ñ–æ—Ä–º—É –¥–ª—è —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–π)
    
- –ì–¥–µ –∏–º–µ–Ω–Ω–æ –æ–Ω –ø–µ—Ä–µ—Å–µ–∫–∞–µ—Ç—Å—è
    
- –ö–∞–∫–æ–π –æ–±—ä–µ–∫—Ç –ø–µ—Ä–µ—Å–µ—á—ë–Ω
    
- –ù–æ—Ä–º–∞–ª—å –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏ (–¥–ª—è —Ä–∞—Å—á—ë—Ç–∞ –æ—Ç—Ä–∞–∂–µ–Ω–∏–π, —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–π –∏ —Ç. –¥.)
    

---

## üß† –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç: —à–∞–≥ –∑–∞ —à–∞–≥–æ–º

### –®–∞–≥ 1: –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ª—É—á–∞ (**Ray**)

–õ—É—á –∑–∞–¥–∞—ë—Ç—Å—è –¥–≤—É–º—è –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:

- **Origin** (–Ω–∞—á–∞–ª–æ) ‚Äî —Ç–æ—á–∫–∞ –≤ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ, –æ—Ç–∫—É–¥–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –ª—É—á. –ù–∞–ø—Ä–∏–º–µ—Ä: `origin = (0, 0, 0)`
    
- **Direction** (–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ) ‚Äî –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π (–µ–¥–∏–Ω–∏—á–Ω–æ–π –¥–ª–∏–Ω—ã) –≤–µ–∫—Ç–æ—Ä, —É–∫–∞–∑—ã–≤–∞—é—â–∏–π, –∫—É–¥–∞ –ª—É—á –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω. –ù–∞–ø—Ä–∏–º–µ—Ä: `direction = (1, 0, 0)`
    

–¢–∞–∫–∂–µ —á–∞—Å—Ç–æ –∑–∞–¥–∞—é—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é **–¥–ª–∏–Ω—É –ª—É—á–∞** (`maxDistance`).

---

### –®–∞–≥ 2: –í—ã–±–æ—Ä –æ–±—ä–µ–∫—Ç–æ–≤ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

–ß—Ç–æ–±—ã —É—Å–∫–æ—Ä–∏—Ç—å —Ä–∞—Å—á—ë—Ç—ã, –¥–≤–∏–∂–∫–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç:

- **Broad Phase** ‚Äî –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –æ–±—ä–µ–∫—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –º–æ–≥—É—Ç –±—ã—Ç—å –∑–∞–¥–µ—Ç—ã
    
- –¢–æ–ª—å–∫–æ –æ–±—ä–µ–∫—Ç—ã —Å –∫–æ–ª–ª–∏–∑–∏–µ–π (–∏–º–µ—é—Ç **colliders**: Box, Sphere, Mesh –∏ —Ç.–¥.)
    

---

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–µ (**Intersection Test**)

–î–ª—è –∫–∞–∂–¥–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ –¥–≤–∏–∂–æ–∫ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:  
**–ü–µ—Ä–µ—Å–µ–∫–∞–µ—Ç—Å—è –ª–∏ –ª—É—á —Å —Ñ–æ—Ä–º–æ–π –æ–±—ä–µ–∫—Ç–∞?**

–¢–∏–ø—ã –æ–±—ä–µ–∫—Ç–æ–≤ –∏ –∫–∞–∫ –æ–Ω–∏ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è:

|–¢–∏–ø —Ñ–æ—Ä–º—ã (Collider)|–ú–µ—Ç–æ–¥ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è|
|---|---|
|**Box** (–∫–æ—Ä–æ–±–∫–∞)|Ray-Box Intersection|
|**Sphere** (—Å—Ñ–µ—Ä–∞)|Ray-Sphere Intersection|
|**Capsule** (–∫–∞–ø—Å—É–ª–∞)|–ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∞—è —Ñ–æ—Ä–º—É–ª–∞ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è —Å —Ü–∏–ª–∏–Ω–¥—Ä–æ–º|
|**Mesh** (—Å–µ—Ç–∫–∞)|–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞–º–∏ (Ray-Triangle)|
### –®–∞–≥ 4: –ù–∞—Ö–æ–∂–¥–µ–Ω–∏–µ —Ç–æ—á–∫–∏ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è

–ï—Å–ª–∏ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–µ –Ω–∞–π–¥–µ–Ω–æ, –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è:

- **Hit Point** ‚Äî –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞, –≥–¥–µ –ª—É—á –ø–µ—Ä–µ—Å—ë–∫ –æ–±—ä–µ–∫—Ç
    
- **Normal** ‚Äî –≤–µ–∫—Ç–æ—Ä –ø–µ—Ä–ø–µ–Ω–¥–∏–∫—É–ª—è—Ä–µ–Ω –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏ (–Ω—É–∂–µ–Ω, –Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –æ—Ç—Ä–∞–∂–µ–Ω–∏—è)
    
- **Distance** ‚Äî —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –æ—Ç –Ω–∞—á–∞–ª–∞ –ª—É—á–∞ –¥–æ —Ç–æ—á–∫–∏ —É–¥–∞—Ä–∞
    
- **Hit Object** ‚Äî –∫–∞–∫–æ–π –æ–±—ä–µ–∫—Ç –±—ã–ª –ø–µ—Ä–µ—Å–µ—á—ë–Ω
    

---

### –ü—Ä–∏–º–µ—Ä:

–î–æ–ø—É—Å—Ç–∏–º, —É –Ω–∞—Å –µ—Å—Ç—å:

- `origin = (0, 0, 0)`
    
- `direction = (1, 0, 0)`
    
- –ú—è—á —Å–æ —Å—Ñ–µ—Ä–∏—á–µ—Å–∫–∏–º **collider** –≤ —Ç–æ—á–∫–µ `(5, 0, 0)` —Å —Ä–∞–¥–∏—É—Å–æ–º 1
    

–ê–ª–≥–æ—Ä–∏—Ç–º –ø—Ä–æ–≤–µ—Ä–∏—Ç:

- –ü–µ—Ä–µ—Å–µ–∫–∞–µ—Ç—Å—è –ª–∏ –ª—É—á `(0,0,0) ‚Üí (1,0,0)` —Å —ç—Ç–æ–π —Å—Ñ–µ—Ä–æ–π?
    
- –î–∞, –µ—Å–ª–∏ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –¥–æ —Ü–µ–Ω—Ç—Ä–∞ —Å—Ñ–µ—Ä—ã –≤–¥–æ–ª—å –ª—É—á–∞ –º–µ–Ω—å—à–µ —Ä–∞–¥–∏—É—Å–∞
    

---

## üì¶ –ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Raycasting

- üéÆ –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –≤—Ä–∞–≥–æ–≤ –≤ –∏–≥—Ä–∞—Ö (AI "–≤–∏–¥–∏—Ç" –∏–≥—Ä–æ–∫–∞)
    
- üö™ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ø–∞–¥–∞–Ω–∏—è –ø—É–ª–∏
    
- üß± –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏ –ø–æ–¥ –Ω–æ–≥–∞–º–∏ (–Ω–∞–∑–µ–º–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞)
    
- üõ†Ô∏è –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ä–µ–¥–∞–∫—Ç–æ—Ä–æ–≤ (–≤—ã–±–æ—Ä –æ–±—ä–µ–∫—Ç–æ–≤ –ø–æ –∫–ª–∏–∫—É)
    

---

## üßÆ –£–ø—Ä–æ—â—ë–Ω–Ω–∞—è —Ñ–æ—Ä–º—É–ª–∞ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è —Å **—Å—Ñ–µ—Ä–æ–π**

1. –í–µ–∫—Ç–æ—Ä –æ—Ç —Ü–µ–Ω—Ç—Ä–∞ –ª—É—á–∞ –¥–æ —Ü–µ–Ω—Ç—Ä–∞ —Å—Ñ–µ—Ä—ã: `L = sphere.center - ray.origin`
    
2. –ü—Ä–æ–µ–∫—Ü–∏—è: `tca = dot(L, ray.direction)`
    
3. –ë–ª–∏–∂–∞–π—à–∞—è —Ç–æ—á–∫–∞: `d¬≤ = dot(L, L) - tca¬≤`
    
4. –ï—Å–ª–∏ `d¬≤ > radius¬≤`, –Ω–µ—Ç –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è
    
5. –ò–Ω–∞—á–µ ‚Äî –ª—É—á –ø—Ä–æ—à—ë–ª —Å–∫–≤–æ–∑—å –∏–ª–∏ –∫–æ—Å–Ω—É–ª—Å—è —Å—Ñ–µ—Ä—ã
    

---

## üí° –ò—Ç–æ–≥

**Raycasting / Line Tracing** ‚Äî —ç—Ç–æ –º–µ—Ç–æ–¥ "–ø—É—Å–∫–∞ –ª—É—á–∞" –∏ –∞–Ω–∞–ª–∏–∑–∞, –∫–∞–∫–∏–µ –æ–±—ä–µ–∫—Ç—ã –æ–Ω –ø–µ—Ä–µ—Å–µ–∫–∞–µ—Ç. –≠—Ç–æ –±–∞–∑–æ–≤—ã–π, –Ω–æ –º–æ—â–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è:

- –∫–æ–ª–ª–∏–∑–∏–π,
    
- –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤,
    
- –Ω–∞–≤–∏–≥–∞—Ü–∏–∏,
    
- —Å–∏–º—É–ª—è—Ü–∏–∏ —Ñ–∏–∑–∏–∫–∏.
    

–•–æ—á–µ—à—å, —è –ø–æ–∫–∞–∂—É –∫–æ–¥–æ–≤—ã–π –ø—Ä–∏–º–µ—Ä –Ω–∞ C++ –∏–ª–∏ Python?

Raycasting / Line Tracing